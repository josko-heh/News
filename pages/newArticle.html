<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AMS</title>

    <link rel="icon" href="../favicon.png" type="image/png" sizes="16x16 32x32">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="form.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <style> main{padding-bottom: 142px;}</style>
</head>
<body>
    <header>
        <div class="wrapper">
            <h1><a id="BBClink" href="index.php"><i class="fas fa-globe-europe"></i>AMS</a></h1>
            <nav>
                <ul>
                    <li><a href="category.php?name=Sport"><i class="fas fa-running"></i><span>Sport</span></a></li>
                    <li><a href="category.php?name=Show"><i class="fas fa-money-bill-alt"></i><span>Show</span></a></li>
                    <li><a href="category.php?name=Science"><i class="fas fa-flask"></i><span>Science</span></a></li>
                    <li><a href="administration.php"><i class="fas fa-file-alt"></i><span>Admin</span></a></li>
                    <li><a href="login.html"><i class="fas fa-sign-in-alt"></i><span>Sign in</span></a></li>
                    <li><a href="newArticle.html"><i class="fas fa-file-alt"></i><span>New article</span></a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <div class="wrapper">
            <h2>Enter new article</h2>

            <form action="../data/insert.php" method="post" enctype="multipart/form-data">
                <label for="headline">Headline</label>
                <input type="text" name="headline" id="headline" class="form-control" aria-describedby="basic-addon1" autofocus >
                <div id="headlineAlert" class="alert alert-primary collapse" role="alert">
                    Headline must be between 3 and 50 characters long!
                </div>

                <label for="summary">Brief summary</label>
                <textarea name="summary" id="summary" class="form-control" rows="2" aria-describedby="basic-addon1" ></textarea>
                <div id="summaryAlert" class="alert alert-primary collapse" role="alert">
                    Summary must be between 3 and 200 characters long!
                </div>

                <label for="story">Story</label>
                <textarea name="story" id="story" class="form-control" rows="5" aria-describedby="basic-addon1" ></textarea>
                <div id="storyAlert" class="alert alert-primary collapse" role="alert">
                    Story must be between 3 and 8000 characters long!
                </div>

                <div class="custom-file">
                    <input type="file" name="inputImage" id="inputImage" class="custom-file-input" accept="image/*" alt="Article image">
                    <label class="custom-file-label" for="inputImage">Choose image</label>
                </div>

                <label for="category">Choose category</label>
                <select class="custom-select" name="category" id="categorySelect" >
                    <option value="" selected disabled>Choose...</option>
                    <option value="Sport">Sport</option>
                    <option value="Show">Show</option>
                    <option value="Science">Science</option>
                </select>
                <div id="selectAlert" class="alert alert-primary collapse" role="alert">
                    Category must be selected!
                </div>

                <label class="form-check-label" for="checkboxArchive" data-toggle="tooltip" data-placement="right" title="Save article in database, but don't show it in news.">
                    <input type="checkbox" name="checkboxArchive" id="checkboxArchive">
                    Archive
                </label>
                <br>

                <input type="reset" name="reset" value="Reset" class="btn btn-primary">
                <input type="submit" name="submit" value="Submit" class="btn btn-primary">
            </form>
        </div>
    </main>    
    <footer>
        <div class="line-hr wrapper"></div>
        <div class="text wrapper">
            <b>Copyright Â© 2020 AMS.</b>
            <span>
                The AMS is fictional news site. 
                <a href="#">Our approach...</a>
            </span>
        </div>
    </footer>

    <script src="setMainHeight.js"></script>
    <script>
        document.getElementsByName("submit")[0].onclick = function (event) {
            $('.alert').hide();

            var sendForm = true;

            var headline = document.getElementById("headline").value.trim();
            if (headline.length < 3 || headline.length > 50) {
                sendForm = false;
                $('#headlineAlert').show();
            }

            var summary= document.getElementById("summary").value.trim();
            if (summary.length < 3 || summary.length > 200) {
                sendForm = false;
                $('#summaryAlert').show();
            }

            var story = document.getElementById("story").value.trim();
            if (summary.length < 3 || story.length > 8000) {
                sendForm = false;
                $('#storyAlert').show();
            }

            var select = document.getElementById("categorySelect");
            if(select.selectedIndex == 0) {
                sendForm = false;
                $('#selectAlert').show();
            }


            if (sendForm == false) {
                event.preventDefault();
            }
        }

        document.getElementsByName("reset")[0].onclick = function (event) {
            $('.alert').hide();
        }
    </script>
</body>
</html>